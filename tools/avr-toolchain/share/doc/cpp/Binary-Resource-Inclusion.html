<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright (C) 1987-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation.  A copy of
the license is included in the
section entitled "GNU Free Documentation License".

This manual contains no Invariant Sections.  The Front-Cover Texts are
(a) (see below), and the Back-Cover Texts are (b) (see below).

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Binary Resource Inclusion (The C Preprocessor)</title>

<meta name="description" content="Binary Resource Inclusion (The C Preprocessor)">
<meta name="keywords" content="Binary Resource Inclusion (The C Preprocessor)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index-of-Directives.html#Index-of-Directives" rel="index" title="Index of Directives">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="Other-Directives.html#Other-Directives" rel="next" title="Other Directives">
<link href="Pragmas.html#Pragmas" rel="prev" title="Pragmas">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Binary-Resource-Inclusion"></a>
<div class="header">
<p>
Next: <a href="Other-Directives.html#Other-Directives" accesskey="n" rel="next">Other Directives</a>, Previous: <a href="Pragmas.html#Pragmas" accesskey="p" rel="prev">Pragmas</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Directives.html#Index-of-Directives" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Binary-Resource-Inclusion-1"></a>
<h2 class="chapter">8 Binary Resource Inclusion</h2>

<a name="index-embed-directive"></a>

<p>The &lsquo;<samp>#embed</samp>&rsquo; directive as specified in the C23 standard allows
efficient inclusion of binary data, usually in initializers of arrays.
GCC supports this directive in C23 mode and as an extension in older C
versions and in C++.
</p>
<p>Similarly to the &lsquo;<samp>#include</samp>&rsquo; directive (see <a href="Include-Syntax.html#Include-Syntax">Include Syntax</a>)
the first argument of the directive is a filename in the same forms
as &lsquo;<samp>#include</samp>&rsquo;.
</p>
<dl compact="compact">
<dt><code>#embed &lt;<var>file</var>&gt;</code></dt>
<dd><p>If <var>file</var> is an absolute filename, this includes the mentioned
file, otherwise searches it in directories specified by the
<samp>--embed-dir=</samp> command line option for the <var>file</var>.
</p>
</dd>
<dt><code>#embed &quot;<var>file</var>&quot;</code></dt>
<dd><p>This variant searches <var>file</var> in the same directory as the source
file which uses the <code>#embed</code> directive and only if not found there
continues searching directories specified by the <samp>--embed-dir=</samp>
command line option.
</p></dd>
</dl>

<p>The <code>#embed</code> directive is expanded as if it was a sequence of
integer literals from 0 to <code>UCHAR_MAX</code> separated by commas, e.g.
<code>#embed __FILE__ limit(4)</code>
could act as if it expanded to
<code>35,101,109,98</code>.  No character set conversion is performed.
</p>
<p>Optional embed parameters can be specified after the required filename
argument.  There are either standard attributes, specified by an
identifier or identifier prefixed and suffixed by 2 underscores (both
treated the same), followed by parameter argument in parentheses, like
<code>#embed &quot;foo.dat&quot; limit(1) __prefix__(32, ) suffix(, 0)</code>
with currently supported standard parameters <code>limit</code>, <code>prefix</code>,
<code>suffix</code> and <code>if_empty</code>, or implementation defined parameters
specified by a unique vendor prefix followed by <code>::</code> followed by
name of the parameter.  GCC uses the <code>gnu</code> prefix for vendor
parameters and currently supports the <code>gnu::offset</code> and
<code>gnu::base64</code> parameters.
</p>
<p>The <code>limit</code> parameter argument is a constant expression which
specifies the maximum number of bytes included by the directive,
<code>prefix</code> and <code>suffix</code> arguments are balanced token sequences
which are prepended and appended to the integer literal sequence if
that sequence is not empty and <code>if_empty</code> argument is balanced token
sequence which is used as expansion for <code>#embed</code> directive if the
resource is empty.
</p>
<p>The <code>gnu::offset</code> parameter argument is a constant expression
which specifies how many bytes to skip from the start of the resource.
<code>limit</code> is then counted from that position.
</p>
<p>The <code>gnu::base64</code> parameter argument is a possibly concatenated
character string literal with base64 encoded data.  See
<a href="https://datatracker.ietf.org/doc/html/rfc4648#section-4">https://datatracker.ietf.org/doc/html/rfc4648#section-4</a>.  There
should be no newlines in the string literal and because this parameter
is meant namely for use by the preprocessor itself, there is no support
for any escape sequences in the string literal argument.  If <code>gnu::base64</code>
parameter is specified, the <code>limit</code> and <code>gnu::offset</code> parameters
should not be specified and the filename should be always <code>&quot;.&quot;</code>.
Instead of reading a file the directive will decode the base64 encoded
data and use that as the data to include.
</p>
<p>The <code>#embed</code> directive is not supported in the Traditional Mode
(see <a href="Traditional-Mode.html#Traditional-Mode">Traditional Mode</a>).
</p>
<hr>
<div class="header">
<p>
Next: <a href="Other-Directives.html#Other-Directives" accesskey="n" rel="next">Other Directives</a>, Previous: <a href="Pragmas.html#Pragmas" accesskey="p" rel="prev">Pragmas</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Directives.html#Index-of-Directives" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
